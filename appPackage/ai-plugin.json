{
  "$schema": "https://developer.microsoft.com/json-schemas/copilot/plugin/v2.3/schema.json",
  "schema_version": "v2.3",
  "name_for_human": "Bloxs Real Estate",
  "description_for_human": "Connect to Bloxs real estate software to query properties, tenants, contracts, and maintenance.",
  "description_for_model": "Query Bloxs real estate data (read-only) via OData. Use $select for specific fields and small $top values. For cross-entity analysis, use join endpoints (getSalesContractLines, getSalesInvoiceLines, getPurchaseInvoiceLines). Status/state labels are tenant-specific: discover valid values first via lookup endpoints like getServiceTicketStates before filtering.",
  "namespace": "bloxs",
  "logo_url": "https://www.bloxs.com/wp-content/uploads/2024/06/logo.png",
  "legal_info_url": "https://www.bloxs.com/privacyverklaring/",
  "privacy_policy_url": "https://www.bloxs.com/privacyverklaring/",
  "functions": [
    {
      "name": "getUnits",
      "description": "Get rental units. Vacancy: $filter=OccupationPercentage lt 1 and not contains(DisplayName,'VERKOCHT'), verify ActiveContractRentId is null. Exclude units where parent complex/building has FinancialMutations (externally managed).",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getBuildings",
      "description": "Get standalone buildings. Filter by OwnerId for owner-specific properties. Use DisplayAddress for location.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getComplexes",
      "description": "Get complexes (multi-unit properties). Check OccupationPercentage for vacancy rate.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getCommercialOverview",
      "description": "Quick portfolio overview with tenant, owner, rent. Key fields: Address, OwnerName, TenantName, IsOccupied, BareRent_Yearly_TotalAmountExcl. No joins needed.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getCommercialOverviewSpecific",
      "description": "Extended commercial overview with EnergyLabel, TheoreticalRent, FutureContractStartDate for deeper analysis.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getRealEstateObjects",
      "description": "Base table for all property types. Use specific tables (Units, Buildings) when OwnerId filtering is needed.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSections",
      "description": "Get sections within complexes for hierarchical portfolio views.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getAddresses",
      "description": "Get address records with Street, City, PostalCode, Latitude, Longitude for geodata.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getOwners",
      "description": "Get property owners with DisplayName, Email, RelationId for linking to other entities.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getPersons",
      "description": "Get persons (tenants, contacts) with RelationId to link to contracts.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getRelations",
      "description": "Base table for all relation types (persons, organisations, suppliers).",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesContracts",
      "description": "Get rent contracts. Filter IsEnded eq false for active contracts. Contains RelationName, OwnerName.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesContractRealestateObjects",
      "description": "Link table: SalesContractId to RealEstateObjectId. Use for contract-to-property joins.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesContractLineItems",
      "description": "Rent line items with RealEstateObjectName, Amount, StartDate, EndDate. Good for rent-per-property analysis.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesContractLines",
      "description": "Contract lines by RealEstateObjectId. Best source for contract history: query by RealEstateObjectId, collect SalesContractId values, then fetch SalesContracts.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getServiceTickets",
      "description": "Maintenance tickets with RealEstateObjectName, TenantName, ServiceTicketStateName. First query getServiceTicketStates for valid state names.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getServiceTicketStates",
      "description": "Valid ticket states (tenant-specific). Query first to discover state names before filtering ServiceTickets.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getServiceTicketProblemCategories",
      "description": "Ticket problem categories (tenant-specific). Discover valid labels before filtering tickets.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getServiceTicketCostCategories",
      "description": "Ticket cost categories for maintenance cost classification.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getFinancialMutations",
      "description": "Ledger transactions. ALWAYS use $filter and $top<=100. Source for mortgage data via LedgerAccountCode.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getLedgerAccounts",
      "description": "Chart of accounts. Use contains(Name,'hypothe') to find mortgage account codes for FinancialMutations.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesInvoices",
      "description": "Sales invoices to tenants. Filter by FinancialYear. WorkflowState is tenant-specific.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getSalesInvoiceLines",
      "description": "Invoice lines with RealEstateObjectId for property-level allocation. Filter by SalesInvoiceId.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getPurchaseInvoices",
      "description": "Purchase invoices from suppliers with RealEstateObjectName for cost analysis. Filter by FinancialYear.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getPurchaseInvoiceLines",
      "description": "Invoice lines with RealEstateObjectId. Use when header lacks property info; filter by PurchaseInvoiceId.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getOpenPositionDebtors",
      "description": "Debtor aging with OutstandingAmount, Age, RelationName. Filter Age gt 30 for overdue.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getOpenPositionCreditors",
      "description": "Creditor aging with outstanding amounts to suppliers.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getFinancingContracts",
      "description": "Financing contracts (loans/mortgages). Often empty; prefer LedgerAccounts + FinancialMutations for mortgage data.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getPropertyValuationValues",
      "description": "WOZ values. Filter ValuationYear eq 2025. Contains RealEstateObjectName, Value.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getTheoreticalRentItems",
      "description": "Market rent per property for vacancy impact analysis. Sum Amount for vacant units.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getInstallations",
      "description": "Equipment with NextMaintenanceOn for maintenance planning.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getMeters",
      "description": "Utility meters (electricity, gas, water) per property.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getMeterReadings",
      "description": "Meter reading values over time. Link via MeterId.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getTasks",
      "description": "System tasks and reminders with Deadline, Status fields.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getNotes",
      "description": "Notes attached to entities. Filter by EntityLinkType (Unit=13, Building=11, Complex=12, Person=4, Owner=1, ServiceTicket=63) and EntityId.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    },
    {
      "name": "getOwnerSettlements",
      "description": "Owner settlements per period with TotalSettlementBalance.",
      "capabilities": {
        "security_info": { "data_handling": ["GetPrivateData"] }
      }
    }
  ],
  "runtimes": [
    {
      "type": "OpenApi",
      "auth": {
        "type": "ApiKeyPluginVault",
        "reference_id": "${{BLOXS_API_KEY_REFERENCE}}"
      },
      "spec": {
        "url": "bloxs-openapi.yaml"
      },
      "run_for_functions": ["*"]
    }
  ],
  "capabilities": {
    "conversation_starters": [
      { "text": "Show me an overview of our real estate portfolio" },
      { "text": "Find all open maintenance tickets" },
      { "text": "List all vacant rental units" },
      { "text": "Show contracts expiring soon" },
      { "text": "What are the WOZ values of our properties?" }
    ]
  }
}
